/**
 * @版本: Senro.3.1.js(http://www.passtome.com/js/Senro.3.1.js)
 * @依赖: jquery 1.9.1(http://static.woniu.com/script/jquery/jquery-1.9.1.min.js)
 * @作者: senro(http://senro.cn)
 * @版权: senro.cn(http://www.passtome.com/)
 * @感谢: NightKnight(#)、蒹葭从风(#)、woniu.com(http://www.woniu.com)
 * @简介: Senro.js 是senro根据日常工作的需求开发的经验总结，目的是快速应对各种蜗牛前端开发中需要用到的常用js方法和组件，
 *       可以把这个对象想象成senro本人，它有自己的属性、方法。开发原则是尽量用一句话解决一个问题当然，尽量减少传参，参数按重要
 *       级别从左往右。由于水平有限，难免会有bug，和不完善，还请需要使用的各位，多多包涵，并指出不足，以便完善；
 * @包含: 核心公用方法(core)、常用组件(widget)、常用界面交互方法(UIInteractive)、常用后端交互方法(dataInteractive)、常用检测方法(check)、常用修复方法(fix)、资源加载(load)、常用js模拟html5效果方法(html5)、常用动画方法(animate)
 */
var Senro=function(e){function t(e){senro[e].state=!0,senro[e].action.fire();for(var t=0;t<senro[e].callbacks.length;t++)senro[e].callbacks[t]&&senro[e].callbacks[t](senro[e].objects[t]);return!1}if(arr_requireJs=e||[],senro=this,senro.version=3.1,senro.video={url:"http://static.woniu.com/script/jwplayer/jwplayer.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.swf={url:"http://static.woniu.com/js/swfobject.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.login={url:"http://static.woniu.com/script/widget/passport/login.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.register={url:"http://static.woniu.com/script/widget/passport/passport.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.iePng={url:"http://static.woniu.com/script/iepng/iepng.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.drag={url:"http://static.woniu.com/script/plugin/jquery-ui-drag.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.mouseWheel={url:"http://static.woniu.com/script/plugin/jquery.mousewheel.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.MSClass={url:"http://static.woniu.com/script/plugin/MSClass.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.animateColors={url:"http://static.woniu.com/script/plugin/jquery.animate-colors-min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.cssSandpaper={url:"http://static.woniu.com/script/plugin/cssSandpaper.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.tweenLite={url:"http://static.woniu.com/script/plugin/greensock-v12-js/TweenLite.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.tweenMax={url:"http://static.woniu.com/script/plugin/greensock-v12-js/TweenMax.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.testHtml5={url:"http://static.woniu.com/script/plugin/modernizr.custom.testHtml5.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.preload={url:"http://static.woniu.com/script/plugin/preloadjs-0.3.1.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.mobile={url:"http://static.woniu.com/script/jquery/jquery.event.touch.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},"string"==typeof arr_requireJs&&(arr_requireJs=[arr_requireJs]),arr_requireJs.length>0)for(var r=0;r<arr_requireJs.length;r++)switch(arr_requireJs[r]){case"video":$.getScript(senro.video.url,function(){t("video")});break;case"swf":$.getScript(senro.swf.url,function(){t("swf")});break;case"login":$.getScript(senro.login.url,function(){t("login")});break;case"register":$.getScript(senro.register.url,function(){t("register")});break;case"iePng":senro.isIE6()&&$.getScript(senro.iePng.url,function(){t("iePng")});break;case"drag":$.getScript(senro.drag.url,function(){t("drag")});break;case"mouseWheel":$.getScript(senro.mouseWheel.url,function(){t("mouseWheel")});break;case"MSClass":$.getScript(senro.MSClass.url,function(){t("MSClass")});break;case"animateColors":$.getScript(senro.animateColors.url,function(){t("animateColors")});break;case"cssSandpaper":$.getScript(senro.cssSandpaper.url,function(){t("cssSandpaper")});break;case"tweenLite":$.getScript(senro.tweenLite.url,function(){t("tweenLite")});break;case"tweenMax":$.getScript(senro.tweenMax.url,function(){t("tweenMax")});break;case"testHtml5":$.getScript(senro.testHtml5.url,function(){t("testHtml5")});break;case"preload":$.getScript(senro.preload.url,function(){t("preload")});break;case"mobile":$.getScript(senro.mobile.url,function(){t("mobile")})}senro.errMsg={video:"请在初始化Senro()时加入'video',例如new Senro('video');如有多个请以数组形式。",swf:"请在初始化Senro()时加入'swf',例如new Senro('swf');如有多个请以数组形式。",login:"请在初始化Senro()时加入'login',例如new Senro('login');如有多个请以数组形式。",register:"请在初始化Senro()时加入'register',例如new Senro('register');如有多个请以数组形式。",iePng:"请在初始化Senro()时加入'iePng',例如new Senro('iePng');如有多个请以数组形式。",drag:"请在初始化Senro()时加入'drag',例如new Senro('drag');如有多个请以数组形式。",mouseWheel:"请在初始化Senro()时加入'mouseWheel',例如new Senro('mouseWheel');如有多个请以数组形式。",MSClass:"请在初始化Senro()时加入'MSClass',例如new Senro('MSClass');如有多个请以数组形式。",animateColors:"请在初始化Senro()时加入'animateColors',例如new Senro('animateColors');如有多个请以数组形式。",cssSandpaper:"请在初始化Senro()时加入'cssSandpaper',例如new Senro('cssSandpaper');如有多个请以数组形式。",tweenLite:"请在初始化Senro()时加入'tweenLite',例如new Senro('tweenLite');如有多个请以数组形式。",tweenMax:"请在初始化Senro()时加入'tweenMax',例如new Senro('tweenMax');如有多个请以数组形式。",testHtml5:"请在初始化Senro()时加入'testHtml5',例如new Senro('testHtml5');如有多个请以数组形式。",preload:"请在初始化Senro()时加入'preload',例如new Senro('preload');如有多个请以数组形式。",mobile:"请在初始化Senro()时加入'mobile',例如new Senro('mobile');如有多个请以数组形式。"},jQuery.extend({visibleHidden:function(e){return e.css({visibility:"hidden"}),!1},visibleShow:function(e){return e.css({visibility:"visible"}),!1}})};Senro.prototype={constructor:Senro,fixedIE6Pos:function(e){function t(){var e,t=$(window).height(),r=$("body").height();return e=r-t}if(senro.isIE6()){e.css({position:"absolute"});var r=e.position().top,s=t();$(window).scroll(function(){var t=$(window).scrollTop();s>t&&e.css({top:t+r})}).resize(function(){t();e.css({top:r}),$(this).scroll()}).scroll()}return!1},fixIE6Png:function(e){return senro.isIE6()&&senro.checkRequire("iePng",function(){DD_belatedPNG.fix(e)}),!1},bigEye:function(e,t,r,s,n,a,o){function i(){if(f.length<m)for(var e=0,s=m-f.length;s>e;e++)f.eq(0).clone().appendTo(t);f.eq(0).addClass(r);for(var n=0;n<h.length;n++)n!=S&&h.eq(n).hide();"fade"==w&&h.css("position","absolute"),f=senro.getItems(t),f.bind(v,function(){return S=f.index(this),S==g||h.is(":animated")?!1:(l(S),g=S,!1)}),f.add(h).mouseenter(function(){q=!1}),f.add(h).mouseleave(function(){q=!0}),k&&c()}function c(){b=setInterval(function(){q&&(S++,S>=m&&(S=0),l(S),g=S)},j)}function l(e){switch(w){case"normal":u(e);break;case"fade":d(e)}return!1}function u(e){return h.eq(g).hide(),f.eq(g).removeClass(r),h.eq(e).show(),f.eq(e).addClass(r),!1}function d(e){return h.eq(g).fadeOut(200),f.eq(g).removeClass(r),h.eq(e).fadeIn(200),f.eq(e).addClass(r),!1}var p={items:$,dots:$,current:"",trigerType:"mouseenter",transType:"normal",autoPlay:!1,time:3e3};senro.parseArgus(arguments,p);var e=p.items,t=p.dots,r=p.current,s=p.trigerType,n=p.transType,a=p.autoPlay,o=p.time,f=senro.getItems(t),h=senro.getItems(e);if(null!=f&&null!=h){var g,b,m=h.length,v=s||"mouseenter",w=n||"normal",S=0,k=a||!1,j=o||3e3,q=!0;g=0,i()}else senro.console("bigEye检测到没有需要轮播的物体！");return!1},selectWidget:function(e,t,r,s){var n=$("#"+e),a=n.width(),o=n.attr("name"),i=n.attr("class"),c=t||e+"-icon",l=n.find("option"),u=r||"senroOption_hover",d=l.filter("[selected=selected]").length>0?l.filter("[selected=selected]"):l.eq(0),p=n.attr("data-scrollCube")||"",f=n.attr("data-scrollLine")||"",h=s||"notLimited";n.after('<div id="'+e+'" class="senroSelect '+i+'" data-name="'+o+'" data-value="'+d.val()+'"><a href="javascript:;" class="senroSelect-icon '+c+'"></a><a class="senroSelected" href="javascript:;" data-value="'+d.val()+'">'+d.html()+'</a><div class="senroOptions"><div class="senroSelectScrollLine '+f+'"><div class="senroSelectScrollCube '+p+'"></div></div><div class="senroOptionsWrap"></div></div><input class="senroSelectHiddenInput" type="hidden" name="'+o+'" value="'+d.val()+'"/></div>'),n.remove();for(var g=$("#"+e+" .senroOptions"),b=$("#"+e+" .senroOptionsWrap"),m=$("#"+e+" .senroSelectHiddenInput"),v=d.index(),w=$("#"+e+" .senroSelectScrollLine"),S=$("#"+e+" .senroSelectScrollCube"),k=0;k<l.length;k++)k==v?void 0!=l.eq(k).attr("class")?b.append('<a class="senroOption '+l.eq(k).attr("class")+'" target="'+(l.eq(k).attr("data-target")||"_self")+'" href="'+(l.eq(k).attr("data-url")||"javascript:;")+'" data-select="selected" data-value="'+l.eq(k).val()+'">'+l.eq(k).html()+"</a>"):b.append('<a class="senroOption '+l.eq(0).attr("class")+'" target="'+(l.eq(k).attr("data-target")||"_self")+'" href="'+(l.eq(k).attr("data-url")||"javascript:;")+'" data-select="selected" data-value="'+l.eq(k).val()+'">'+l.eq(k).html()+"</a>"):void 0!=l.eq(k).attr("class")?b.append('<a class="senroOption '+l.eq(k).attr("class")+'" target="'+(l.eq(k).attr("data-target")||"_self")+'" href="'+(l.eq(k).attr("data-url")||"javascript:;")+'" data-value="'+l.eq(k).val()+'">'+l.eq(k).html()+"</a>"):b.append('<a class="senroOption '+l.eq(0).attr("class")+'" target="'+(l.eq(k).attr("data-target")||"_self")+'" href="'+(l.eq(k).attr("data-url")||"javascript:;")+'" data-value="'+l.eq(k).val()+'">'+l.eq(k).html()+"</a>");var j=$("#"+e+" .senroSelect-icon"),q=$("#"+e),C=$("#"+e+" .senroSelected"),x=b.find(".senroOption"),y=x.eq(0).height();if(q.css("width",a+"px"),"notLimited"!=h){var _=h*y;g.css("height",_),w.css("height",_),senro.scrollBar(S,b)}else g.css("overflow","visible"),w.hide();return $(document).click(function(){q.css({overflow:"hidden"})}),j.add(C).click(function(){return"hidden"==q.css("overflow")?($(".senroSelect").css({overflow:"hidden"}),q.css({overflow:"visible"})):q.css({overflow:"hidden"}),x.each(function(){"selected"==$(this).data("select")?$(this).addClass(u):$(this).removeClass(u)}),!1}),x.mouseenter(function(){return $(this).removeClass(u),!1}),x.click(function(){x.data("select","undefined"),$(this).data("select","selected"),o=$(this).html(),m.attr("value",o),q.attr("data-value",o),C.html($(this).html()),C.attr("data-value",$(this).attr("data-value")),q.css({overflow:"hidden"})}),!1},sliderTab:function(e,t,r,s,n,a){function o(e){return u.eq(h).hide(),l.eq(h).removeClass(r),u.eq(e).show(),l.eq(e).addClass(r),!1}function i(e){return u.eq(h).fadeOut(200),l.eq(h).removeClass(r),u.eq(e).fadeIn(200),l.eq(e).addClass(r),!1}var c={btns:$,conts:$,current:"",trigerType:"mouseover",transType:"normal",currIndex:0};senro.parseArgus(arguments,c);var e=c.btns,t=c.conts,r=c.current,s=c.trigerType,n=c.transType,a=c.currIndex,l=e,u=t,d=s||"mouseover",p=n||"normal",f=a||0,h=a||0;l.eq(f).addClass(r);for(var g=0;g<u.length;g++)g!=f?u.eq(g).hide():u.eq(g).show();return l.bind(d,function(){var e=l.index(this);if(e==h||u.is(":animated"))return!1;switch(p){case"normal":o(e);break;case"fade":i(e)}return h=e,!1}),!1},addSwf:function(e,t,r,s,n){var a={id:"",file:"",width:null,height:null,callback:null};senro.parseArgus(arguments,a);var e=a.id,t=a.file,r=a.width,s=a.height,n=a.callback,o=$("#"+e).parent(),i=r||o.width(),c=s||o.height();return senro.checkRequire("swf",function(){senro.swf.objects.push(addSWF(t,e,i,c)),senro.swf.callbacks.push(n)}),!1},controlPop:function(e,t,r,s,n,a){function o(){var e=Math.max(h.height(),$(window).height()),t=$(window).width(),r=($(window).height()-l.outerHeight(!0))/2+$(document).scrollTop(),s=(t-l.outerWidth(!0))/2;return jQuery.visibleShow(l),l.hide(),l.css({top:r,left:s}).fadeIn(g),i(u,t,e),!1}function i(e,t,r){return e.css({height:r,width:t}),!1}var c={type:"",pop:$,close:null,mask:null,speed:0,maskClose:!1};senro.parseArgus(arguments,c);var e=c.type,t=c.pop,r=c.close,s=c.mask,n=c.speed,a=c.maskClose,l=t,u=s||$('<div class="senroPopMask"></div>'),d=s?u.css("backgroundColor"):"#000",p=s?u.css("opacity"):.6,f=r||null,h=$("body"),g=n||0,b=s?!0:!1;return 0!=l.find("form").length&&l.find("form")[0].reset(),l.css({zIndex:"9999",margin:0}),u.css({position:"absolute",left:"0",top:"0",zIndex:"9998",backgroundColor:d,opacity:p}),$(window).resize(function(){return l.is(":visible")&&o(),!1}),"show"==e?(o(),b||h.append(u),u.fadeIn(g)):"hide"==e&&l.add(u).fadeOut(g,function(){b?u.remove():$(".senroPopMask").remove()}),a&&u.click(function(){return l.add(u).fadeOut(g,function(){b||u.remove()}),!1}),f&&f.click(function(){return l.add(u).fadeOut(g,function(){b||u.remove()}),!1}),!1},cssTriangle:function(e,t,r,s){var n={up:{borderWidth:"0 "+r+" "+r+" "+r,borderColor:"#000000 #000000 "+s+" #000000",ie6borderColor:"transparent transparent "+s+" transparent"},right:{borderWidth:r+" 0 "+r+" "+r,borderColor:"#000000 #000000 #000000 "+s,ie6borderColor:"transparent transparent transparent "+s},down:{borderWidth:r+" "+r+" 0 "+r,borderColor:s+" #000000 #000000 #000000",ie6borderColor:s+" transparent transparent transparent"},left:{borderWidth:r+" "+r+" "+r+" 0",borderColor:"#000000 "+s+" #000000 #000000",ie6borderColor:"transparent "+s+" transparent transparent"}};return e.css({width:0,height:0,lineHeight:"0",borderStyle:"solid",borderWidth:n[t].borderWidth}),senro.isIE6()?e.css({borderColor:n[t].borderColor,filter:"progid:DXImageTransform.Microsoft.Chroma(color='#000000')"}):e.css({borderColor:n[t].ie6borderColor}),!1},changeFont:function(e,t,r,s){t.click(function(){return e.css({"font-size":"16px"}),!1}),r.click(function(){return e.css({"font-size":"14px"}),!1}),s.click(function(){return e.css({"font-size":"13px"}),!1})},addShare:function(e,t){var r=$("#"+t)||$("body")[1],s='<div class="jiathis_style"><a class="jiathis_button_qzone"></a><a class="jiathis_button_tsina"></a><a class="jiathis_button_tqq"></a><a class="jiathis_button_renren"></a><a class="jiathis_button_kaixin001"></a><a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a><a class="jiathis_counter_style"></a></div>',n={type:"text/javascript",src:"http://v3.jiathis.com/code/jia.js?uid=1373876204301599",charset:"utf-8"};return e.html(s),senro.addScript(n,r),!1},isIE6:function(){var e="undefined"==typeof document.body.style.maxHeight;return e?!0:!1},checkRequire:function(e,t){for(var r=!1,s=0;s<arr_requireJs.length;s++)if(arr_requireJs[s]==e){r=!0;break}if(r)if(senro[e].state){t();for(var n=0;n<senro[e].callbacks.length;n++)senro[e].callbacks[n]&&senro[e].callbacks[n](senro[e].objects[n])}else senro[e].action.add(t);else alert(senro.errMsg[e]);return!1},getItems:function(e){var t;if(e.find("div").length>0)t=1==e.find("div").length?e.find("div"):e.find("div").siblings();else if(e.find("li").length>0)t=1==e.find("li").length?e.find("li"):e.find("li").siblings();else if(e.find("a").length>0)t=1==e.find("a").length?e.find("a"):e.find("a").siblings();else{if(!(e.find("img").length>0))return null;t=1==e.find("img").length?e.find("img"):e.find("img").siblings()}return t},parseArgus:function(e,t){function r(e){return e instanceof jQuery?"$":"object"==typeof e?"object":!1}var s=0;for(var n in t)t[n]="object"==r(e[0])?e[0][n]?e[0][n]:t[n]:e[s]?e[s]:t[n],s++},console:function(e){!function(){for(var e,t=function(){},r=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],s=r.length,n=window.console=window.console||{};s--;)e=r[s],n[e]||(n[e]=t)}(),console&&console.log(e)},scrollBar:function(e,t,r,s){var n={scrollCube:$,container:$,direction:"v",speed:10};senro.parseArgus(arguments,n);var t=n.container,e=n.scrollCube,r=n.direction,s=n.speed,a=t.parent(),o=a.outerHeight(),i=t.parent(),c=i.outerHeight(),l=t.outerHeight(),u=o*c/l,d=a.outerWidth(),p=i.outerWidth(),f=t.outerWidth(),h=d*p/f,g=0,b=r,s=s;"v"==b?(e.css({height:u+"px"}),t.css("top","0px"),e.css("top","0px")):(e.css({width:h+"px"}),t.css("left","0px"),e.css("left","0px")),senro.checkRequire("drag",function(){e.draggable({containment:"parent",drag:function(){var r,s=e.index(this),n=e.eq(s);"v"==b?(r=n.position().top/a.outerHeight(),g=Math.round(100*r/((o-u)/o)),t.css("top",-t.outerHeight()*r+"px")):(r=n.position().left/a.outerWidth(),g=Math.round(100*r/((d-h)/d)),t.css("left",-t.outerWidth()*r+"px"))}})}),senro.checkRequire("mouseWheel",function(){i.mousewheel(function(r,n){g-=n*s,g>100?g=100:0>g&&(g=0);var a=g/100;return"v"==b?(t.css("top",-(l-c)*a+"px"),e.css("top",(o-u)*a+"px")):(t.css("left",-(f-p)*a+"px"),e.css("left",(d-h)*a+"px")),!1})})},addScript:function(e,t){var r=document.createElement("script"),s=t||$("head"),n="?v="+(new Date).getTime();for(var a in e)r[a]=e[a];return r.src=e.src+n,s.after(r),!1}};