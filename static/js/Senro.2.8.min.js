/**
 * @版本: Senro.2.8.js(http://senro.cn/senro/Senro.2.8.js)
 * @依赖: jquery 1.9.1(http://static.woniu.com/script/jquery/jquery-1.9.1.min.js)
 * @作者: senro(http://senro.cn)
 * @版权: senro.cn(http://senro.cn)
 * @感谢: NightKnight(#)、蒹葭从风(#)、woniu.com(http://www.woniu.com)
 * @简介: Senro.2.8.js 是senro根据日常工作的需求开发的经验总结，目的是快速应对各种蜗牛前端开发中需要用到的常用js方法和组件，
 *       可以把这个对象想象成senro本人，它有自己的属性、方法。开发原则是尽量用一句话解决一个问题当然，尽量减少传参，参数按重要
 *       级别从左往右。由于水平有限，难免会有bug，和不完善，还请需要使用的各位，多多包涵，并指出不足，以便完善；
 * @包含: 核心公用方法(core)、常用组件(widget)、常用界面交互方法(UIInteractive)、常用后端交互方法(dataInteractive)、常用检测方法(check)、常用修复方法(fix)、资源加载(load)、常用js模拟html5效果方法(html5)、常用动画方法(animate)
 */
var Senro=function(e){function t(e){senro[e].state=!0,senro[e].action.fire();for(var t=0;t<senro[e].callbacks.length;t++)senro[e].callbacks[t]&&senro[e].callbacks[t](senro[e].objects[t]);return!1}if(arr_requireJs=e||[],senro=this,senro.video={url:"http://static.woniu.com/script/jwplayer/jwplayer.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.swf={url:"http://static.woniu.com/js/swfobject.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.login={url:"http://static.woniu.com/script/widget/passport/login.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.iePng={url:"http://static.woniu.com/script/iepng/iepng.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.drag={url:"http://static.woniu.com/script/plugin/jquery-ui-drag.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.mouseWheel={url:"http://static.woniu.com/script/plugin/jquery.mousewheel.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.MSClass={url:"http://static.woniu.com/script/plugin/MSClass.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.animateColors={url:"http://static.woniu.com/script/plugin/jquery.animate-colors-min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.cssSandpaper={url:"http://static.woniu.com/script/plugin/cssSandpaper.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.tweenLite={url:"http://static.woniu.com/script/plugin/greensock-v12-js/TweenLite.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.tweenMax={url:"http://static.woniu.com/script/plugin/greensock-v12-js/TweenMax.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.testHtml5={url:"http://static.woniu.com/script/plugin/modernizr.custom.testHtml5.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},senro.preload={url:"http://static.woniu.com/script/plugin/preloadjs-0.3.1.min.js",state:!1,objects:[],action:$.Callbacks(),callbacks:[]},"string"==typeof arr_requireJs&&(arr_requireJs=[arr_requireJs]),arr_requireJs.length>0)for(var n=0;n<arr_requireJs.length;n++)switch(arr_requireJs[n]){case"video":$.getScript(senro.video.url,function(){t("video")});break;case"swf":$.getScript(senro.swf.url,function(){t("swf")});break;case"login":$.getScript(senro.login.url,function(){t("login")});break;case"iePng":senro.isIE6()&&$.getScript(senro.iePng.url,function(){t("iePng")});break;case"drag":$.getScript(senro.drag.url,function(){t("drag")});break;case"mouseWheel":$.getScript(senro.mouseWheel.url,function(){t("mouseWheel")});break;case"MSClass":$.getScript(senro.MSClass.url,function(){t("MSClass")});break;case"animateColors":$.getScript(senro.animateColors.url,function(){t("animateColors")});break;case"cssSandpaper":$.getScript(senro.cssSandpaper.url,function(){t("cssSandpaper")});break;case"tweenLite":$.getScript(senro.tweenLite.url,function(){t("tweenLite")});break;case"tweenMax":$.getScript(senro.tweenMax.url,function(){t("tweenMax")});break;case"testHtml5":$.getScript(senro.testHtml5.url,function(){t("testHtml5")});break;case"preload":$.getScript(senro.preload.url,function(){t("preload")})}senro.errMsg={video:"请在初始化Senro()时加入'video',例如new Senro('video');如有多个请以数组形式。",swf:"请在初始化Senro()时加入'swf',例如new Senro('swf');如有多个请以数组形式。",login:"请在初始化Senro()时加入'login',例如new Senro('login');如有多个请以数组形式。",iePng:"请在初始化Senro()时加入'iePng',例如new Senro('iePng');如有多个请以数组形式。",drag:"请在初始化Senro()时加入'drag',例如new Senro('drag');如有多个请以数组形式。",mouseWheel:"请在初始化Senro()时加入'mouseWheel',例如new Senro('mouseWheel');如有多个请以数组形式。",MSClass:"请在初始化Senro()时加入'MSClass',例如new Senro('MSClass');如有多个请以数组形式。",animateColors:"请在初始化Senro()时加入'animateColors',例如new Senro('animateColors');如有多个请以数组形式。",cssSandpaper:"请在初始化Senro()时加入'cssSandpaper',例如new Senro('cssSandpaper');如有多个请以数组形式。",tweenLite:"请在初始化Senro()时加入'tweenLite',例如new Senro('tweenLite');如有多个请以数组形式。",tweenMax:"请在初始化Senro()时加入'tweenMax',例如new Senro('tweenMax');如有多个请以数组形式。",testHtml5:"请在初始化Senro()时加入'testHtml5',例如new Senro('testHtml5');如有多个请以数组形式。",preload:"请在初始化Senro()时加入'preload',例如new Senro('preload');如有多个请以数组形式。"},jQuery.extend({visibleHidden:function(e){return e.css({visibility:"hidden"}),!1},visibleShow:function(e){return e.css({visibility:"visible"}),!1}})};Senro.prototype={constructor:Senro,checkRequire:function(e,t){for(var n=!1,r=0;r<arr_requireJs.length;r++)if(arr_requireJs[r]==e){n=!0;break}if(n)if(senro[e].state){t();for(var s=0;s<senro[e].callbacks.length;s++)senro[e].callbacks[s]&&senro[e].callbacks[s](senro[e].objects[s])}else senro[e].action.add(t);else alert(senro.errMsg[e]);return!1},console:function(e){!function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,s=window.console=window.console||{};r--;)e=n[r],s[e]||(s[e]=t)}(),console&&console.log(e)},len:function(e){for(var e=e||"",t=0,n=e.split(""),r=0;r<n.length;r++)n[r].charCodeAt(0)<299?t++:t+=2;return t},random:function(e,t){return Math.floor(e+Math.random()*(t-e))},isIE6:function(){var e=!-[1]&&!window.XMLHttpRequest;return e?!0:!1},addScript:function(e,t){var n=document.createElement("script"),r=t||$("head"),s="?v="+(new Date).getTime();for(var i in e)n[i]=e[i];return n.src=e.src+s,r.after(n),!1},getItems:function(e){var t;return e.find("div").length>0?t=1==e.find("div").length?e.find("div"):e.find("div").siblings():e.find("li").length>0?t=1==e.find("li").length?e.find("li"):e.find("li").siblings():e.find("a").length>0?t=1==e.find("a").length?e.find("a"):e.find("a").siblings():e.find("img").length>0&&(t=1==e.find("img").length?e.find("img"):e.find("img").siblings()),t},sliderTab:function(e,t,n,r,s,i){function a(e){return l.eq(p).hide(),c.eq(p).removeClass(n),l.eq(e).show(),c.eq(e).addClass(n),!1}function o(e){return l.eq(p).fadeOut(200),c.eq(p).removeClass(n),l.eq(e).fadeIn(200),c.eq(e).addClass(n),!1}var c=e,l=t,u=r||"mouseover",d=s||"normal",f=i||0,p=i||0;c.eq(f).addClass(n);for(var h=0;h<l.length;h++)h!=f&&l.eq(h).hide();return c.bind(u,function(){var e=c.index(this);if(e==p||l.is(":animated"))return!1;switch(d){case"normal":a(e);break;case"fade":o(e)}return p=e,!1}),!1},bigEye:function(e,t,n,r,s,i,a){function o(){f=setInterval(function(){S&&(w++,w>=g&&(w=0),c(w),d=w)},k)}function c(e){switch(v){case"normal":l(e);break;case"fade":u(e)}return!1}function l(e){return h.eq(d).hide(),p.eq(d).removeClass(n),h.eq(e).show(),p.eq(e).addClass(n),!1}function u(e){return h.eq(d).fadeOut(200),p.eq(d).removeClass(n),h.eq(e).fadeIn(200),p.eq(e).addClass(n),!1}var d,f,p=senro.getItems(t),h=senro.getItems(e),g=h.length,m=r||"mouseenter",v=s||"normal",w=0,b=i||!1,k=a||3e3,S=!0;if(d=0,p.length<g)for(var q=0,$=g-p.length;$>q;q++)p.eq(0).clone().appendTo(t);p.eq(0).addClass(n);for(var x=0;x<h.length;x++)x!=w&&h.eq(x).hide();return"fade"==v&&h.css("position","absolute"),p=senro.getItems(t),p.bind(m,function(){return w=p.index(this),w==d||h.is(":animated")?!1:(c(w),d=w,!1)}),p.add(h).mouseenter(function(){S=!1}),p.add(h).mouseleave(function(){S=!0}),b&&o(),!1},marquee:function(e,t,n,r,s){senro.checkRequire("MSClass",function(){var i=new Marquee(e),a=$(""),o=n||a,c=r||a,l=s||1,u=$("#"+e);switch(t){case"left":i.Direction=2,o.mouseover(function(){i.Direction=3}),c.mouseover(function(){i.Direction=2});break;case"right":i.Direction=3,o.mouseover(function(){i.Direction=2}),c.mouseover(function(){i.Direction=3});break;case"top":i.Direction=0,o.mouseover(function(){i.Direction=1}),c.mouseover(function(){i.Direction=0});break;case"bottom":i.Direction=1,o.mouseover(function(){i.Direction=0}),c.mouseover(function(){i.Direction=1})}i.Step=l,i.Width=u.width(),i.Height=u.height(),i.Timer=40,i.ScrollStep=1,i.Start(),i.BakStep=i.Step,o.add(c).mousedown(function(){i.Step=i.BakStep+3}),o.add(c).mouseup(function(){i.Step=i.BakStep})})},simpleSliderLR:function(e,t,n,r,s,i,a,o){function c(){u=setInterval(function(){x&&f.click()},$)}function l(e){v=senro.getItems(p),"left"==e?p.animate({left:-w*h+"px"},m,null,function(){p.append(v.eq(0).add(v.eq(h-1)).remove()).css({left:"0px"})}):p.prepend(v.eq(k-1).add(v.eq(k-1-(h-1))).remove()).css({left:-w*h+"px"}).animate({left:"0px"},m)}var u,d=e,f=t,p=n,h=r||1,g=s||!1,m=i||200,v=senro.getItems(p),w=v.eq(1).outerWidth(!0),b=0,k=v.length,S=(k-h)*w,q=a||!1,$=o||3e3,x=!0;d.click(function(){if(g){if(p.is(":animated"))return!1;l("right")}else{if(jQuery.visibleShow(f),0===b)return jQuery.visibleHidden(d),!1;b+=w,p.animate({left:b+"px"},m)}return!1}),f.click(function(){if(g){if(p.is(":animated"))return!1;l("left")}else{if(jQuery.visibleShow(d),b===-S)return jQuery.visibleHidden(f),!1;b-=w,p.animate({left:b+"px"},m)}return!1}),d.add(f).add(p).mouseenter(function(){x=!1}),d.add(f).add(p).mouseleave(function(){x=!0}),q&&c()},sliderLR:function(e,t,n,r,s,i,a,o){function c(e,t,n){var r=e.parent(),s=r.width(),i=(t/n).toFixed(1);0==i?e.css("left",s*i+"px"):e.animate({left:s*i-e.width()+"px"},100)}function l(e,t){var n=u(e),r=n.eq(1).outerWidth(!0),s=-t*r;return e.animate({left:s+"px"},200),!1}function u(e){var t;return e.find("a").length>0?t=e.find("a").siblings():e.find("div").length>0?t=e.find("div").siblings():e.find("li").length>0?t=e.find("li").siblings():e.find("img").length>0&&(t=e.find("img").siblings()),t}function d(e,t){var n=u(e),r=n.length,s=n.outerWidth(!0),i=((e.parent().width()/2).toFixed(1)-5,T.position().left,T.outerWidth(!0)/2,parseInt(n.eq(t).css("margin-left"))),a=r*s-e.parent().width();return W&&e.css("left",q),L>t?(T.css({left:n.eq(t).position().left+i+"px"},200),W=!1):t>=L&&-e.position().left<a-s||-e.position().left>0&&_>t&&I>t?(I=t,e.animate({left:-s*(t-L)+"px"},200),T.animate({left:n.eq(t).position().left+i+"px"},200),W=!1):(T.css({left:n.eq(t).position().left+i+"px"},200),_=t,W=!1),!1}var f=t,p=n,h=e,g=s||null,m=i||null,v=r||null,a=a||null,w=o||"thumb_current";(e.find("img").attr("lazy")||r.find("img").attr("lazy"))&&e.add(r).find("img").each(function(t){e.add(r).find("img").eq(t).attr("src",e.add(r).find("img").eq(t).attr("lazy"))});var b=u(h),k=b.length-1,S=0;if(f.add(g).click(function(){return h.is(":animated")?!1:0>=S?(S=0,!1):(S--,l(h,S),v&&(d(v,S),a&&c(a,S,k)),!1)}),p.add(m).click(function(){return h.is(":animated")?!1:S>=k?(S=k,!1):(S++,l(h,S),v&&(d(v,S),a&&c(a,S,k)),!1)}),v){var q,x=u(v),C=(x.length,x.eq(1).outerWidth(!0)),j=x.eq(1).outerWidth(),M=x.eq(1).outerHeight(),y=parseInt(x.eq(0).css("margin-left")),L=(v.parent().width()/2/C).toFixed(0)-1,I=0,_=0,W=!1,T=$('<div class="'+w+'"></div>');v.append(T),v.css("width",x.length*C);var R=parseInt(T.css("borderLeftWidth"));T.css({width:j-2*R+"px",height:M-2*R+"px",left:y+"px",top:x.eq(0).position().top+"px"}),x.click(function(){var e=x.index(this),t=parseInt(x.eq(e).css("margin-left"));return e>k&&(e-=(k+1)*(e%(k+1))),S=e,l(h,S),a&&c(a,S,k),T.animate({left:x.eq(e).position().left+t+"px"},100),!1})}a&&senro.checkRequire("drag",function(){var e=v.parent(),t=e.width(),n=v.width();a.css("left","0px"),n>t&&a.draggable({containment:"parent",start:function(){q=v.position().left},drag:function(){var e=a.index(this),r=a.eq(e),s=r.parent(),i=r.position().left/(s.width()-r.width());if(v){var o=(n-t)*i;v.css({left:-o+"px"})}},stop:function(){W=!0}})})},carouselSlider:function(e,t,n,r){function s(t,n,r){for(var s=0;a>=s;s++){var o=e.eq(l[n][s]).data("mask"),u=parseInt(e.eq(l[n][s]).data("zindex"));i[s]={mask:o,left:e.eq(s).position().left,top:e.eq(s).position().top,width:e.eq(s).width(),height:e.eq(s).height(),zIndex:"right"==t?u:0==l[n][s]?u-1:u}}e.removeClass("current");for(var d=0;a>=d;d++)l[r][d]==Math.floor((0+a)/2)&&e.eq(d).addClass("current"),e.eq(l[n][d]).css({zIndex:i[l[r][d]].zIndex}).animate({left:i[l[r][d]].left,top:i[l[r][d]].top,width:i[l[r][d]].width,height:i[l[r][d]].height}),e.eq(l[n][d]).find("."+c).animate({opacity:i[l[r][d]].mask});return!1}for(var i=[],a=e.length-1,o=0,c=r||"itemMask",l=[],u=0;a>=u;u++){l[u]=[];for(var d=0;a>=d;d++)l[u][d]=0==u?d:l[u-1][d+1>a?0:d+1]}e.eq(2).addClass("current"),e.click(function(){if(e.filter(":animated").length)return!1;var t=$(this);if(t.hasClass("current"))window.location.href=t.find(".itemLink").attr("href");else{var n=e.index(this),r=l[o][n];if(0==r||1==r){var i=o+1;i>a&&(i=0),s("left",o,i),o=i}else if(3==r||r==a){var i=o-1;0>i&&(i=a),s("right",o,i),o=i}}return!1}),t.click(function(){if(e.is(":animated"))return!1;var t=o+1;return t>a&&(t=0),s("left",o,t),o=t,!1}),n.click(function(){if(e.is(":animated"))return!1;var t=o-1;return 0>t&&(t=a),s("right",o,t),o=t,!1})},scrollBar:function(e,t,n,r){var s=e.parent(),i=s.outerHeight(),a=t.parent(),o=a.outerHeight(),c=t.outerHeight(),l=i*o/c,u=s.outerWidth(),d=a.outerWidth(),f=t.outerWidth(),p=u*d/f,h=0,g=n||"v",r=r||10;"v"==g?(e.css({height:l+"px"}),t.css("top","0px"),e.css("top","0px")):(e.css({width:p+"px"}),t.css("left","0px"),e.css("left","0px")),senro.checkRequire("drag",function(){e.draggable({containment:"parent",drag:function(){var n,r=e.index(this),a=e.eq(r);"v"==g?(n=a.position().top/s.outerHeight(),h=Math.round(100*n/((i-l)/i)),t.css("top",-t.outerHeight()*n+"px")):(n=a.position().left/s.outerWidth(),h=Math.round(100*n/((u-p)/u)),t.css("left",-t.outerWidth()*n+"px"))}})}),senro.checkRequire("mouseWheel",function(){a.mousewheel(function(n,s){h-=s*r,h>100?h=100:0>h&&(h=0);var a=h/100;return"v"==g?(t.css("top",-(c-o)*a+"px"),e.css("top",(i-l)*a+"px")):(t.css("left",-(f-d)*a+"px"),e.css("left",(u-p)*a+"px")),!1})})},selectWidget:function(e,t,n,r){var s=$("#"+e),i=s.width(),a=s.attr("name"),o=s.attr("class"),c=t||e+"-icon",l=s.find("option"),u=n||"senroOption_hover",d=l.filter("[selected=selected]").length>0?l.filter("[selected=selected]"):l.eq(0),f=s.attr("data-scrollCube")||"",p=s.attr("data-scrollLine")||"",h=r||"notLimited";s.after('<div id="'+e+'" class="senroSelect '+o+'" data-name="'+a+'" data-value="'+d.val()+'"><a href="javascript:;" class="senroSelect-icon '+c+'"></a><a class="senroSelected" href="javascript:;" data-value="'+d.val()+'">'+d.html()+'</a><div class="senroOptions"><div class="senroSelectScrollLine '+p+'"><div class="senroSelectScrollCube '+f+'"></div></div><div class="senroOptionsWrap"></div></div><input class="senroSelectHiddenInput" type="hidden" name="'+a+'" value="'+d.val()+'"/></div>'),s.remove();for(var g=$("#"+e+" .senroOptions"),m=$("#"+e+" .senroOptionsWrap"),v=$("#"+e+" .senroSelectHiddenInput"),w=d.index(),b=$("#"+e+" .senroSelectScrollLine"),k=$("#"+e+" .senroSelectScrollCube"),S=0;S<l.length;S++)S==w?void 0!=l.eq(S).attr("class")?m.append('<a class="senroOption '+l.eq(S).attr("class")+'" target="'+(l.eq(S).attr("data-target")||"_self")+'" href="'+(l.eq(S).attr("data-url")||"javascript:;")+'" data-select="selected" data-value="'+l.eq(S).val()+'">'+l.eq(S).html()+"</a>"):m.append('<a class="senroOption '+l.eq(0).attr("class")+'" target="'+(l.eq(S).attr("data-target")||"_self")+'" href="'+(l.eq(S).attr("data-url")||"javascript:;")+'" data-select="selected" data-value="'+l.eq(S).val()+'">'+l.eq(S).html()+"</a>"):void 0!=l.eq(S).attr("class")?m.append('<a class="senroOption '+l.eq(S).attr("class")+'" target="'+(l.eq(S).attr("data-target")||"_self")+'" href="'+(l.eq(S).attr("data-url")||"javascript:;")+'" data-value="'+l.eq(S).val()+'">'+l.eq(S).html()+"</a>"):m.append('<a class="senroOption '+l.eq(0).attr("class")+'" target="'+(l.eq(S).attr("data-target")||"_self")+'" href="'+(l.eq(S).attr("data-url")||"javascript:;")+'" data-value="'+l.eq(S).val()+'">'+l.eq(S).html()+"</a>");var q=$("#"+e+" .senroSelect-icon"),x=$("#"+e),C=$("#"+e+" .senroSelected"),j=m.find(".senroOption"),M=j.eq(0).height();if(x.css("width",i+"px"),"notLimited"!=h){var y=h*M;g.css("height",y),b.css("height",y),senro.scrollBar(k,m)}else g.css("overflow","visible"),b.hide();return $(document).click(function(){x.css({overflow:"hidden"})}),q.add(C).click(function(){return"hidden"==x.css("overflow")?($(".senroSelect").css({overflow:"hidden"}),x.css({overflow:"visible"})):x.css({overflow:"hidden"}),j.each(function(){"selected"==$(this).data("select")?$(this).addClass(u):$(this).removeClass(u)}),!1}),j.mouseenter(function(){return $(this).removeClass(u),!1}),j.click(function(){j.data("select","undefined"),$(this).data("select","selected"),a=$(this).html(),v.attr("value",a),x.attr("data-value",a),C.html($(this).html()),C.attr("data-value",$(this).attr("data-value")),x.css({overflow:"hidden"})}),!1},cssTriangle:function(e,t,n,r){var s={up:{borderWidth:"0 "+n+" "+n+" "+n,borderColor:"#000000 #000000 "+r+" #000000",ie6borderColor:"transparent transparent "+r+" transparent"},right:{borderWidth:n+" 0 "+n+" "+n,borderColor:"#000000 #000000 #000000 "+r,ie6borderColor:"transparent transparent transparent "+r},down:{borderWidth:n+" "+n+" 0 "+n,borderColor:r+" #000000 #000000 #000000",ie6borderColor:r+" transparent transparent transparent"},left:{borderWidth:n+" "+n+" "+n+" 0",borderColor:"#000000 "+r+" #000000 #000000",ie6borderColor:"transparent "+r+" transparent transparent"}};return e.css({width:0,height:0,lineHeight:"0",borderStyle:"solid",borderWidth:s[t].borderWidth}),senro.isIE6()?e.css({borderColor:s[t].borderColor,filter:"progid:DXImageTransform.Microsoft.Chroma(color='#000000')"}):e.css({borderColor:s[t].ie6borderColor}),!1},controlPop:function(e,t,n,r){function s(){var e=Math.max(d.height(),$(window).height()),t=$(window).width(),n=($(window).height()-a.outerHeight(!0))/2+$(document).scrollTop(),r=(t-a.outerWidth(!0))/2;return a.css({top:n,left:r}).show(),jQuery.visibleShow(a),i(o,t,e),!1}function i(e,t,n){return e.css({height:n,width:t}),!1}var a=t,o=r||$('<div class="senroPopMask"></div>'),c=r?o.css("backgroundColor"):"#000",l=r?o.css("opacity"):.6,u=n||"",d=$("body"),f=arguments[3]?!0:!1;return 0!=a.find("form").length&&a.find("form")[0].reset(),a.css({zIndex:"9999",margin:0}),o.css({position:"absolute",left:"0",top:"0",zIndex:"9998",backgroundColor:c,opacity:l}),$(window).resize(function(){return a.is(":visible")&&s(),!1}),"show"==e?(s(),f||d.append(o),o.show()):"hide"==e&&(a.add(o).hide(),f?o.remove():$(".senroPopMask").remove()),o.click(function(){return a.add(o).hide(),f||o.remove(),!1}),u&&u.click(function(){return a.add(o).hide(),f||o.remove(),!1}),!1},addVideo:function(e,t,n,r,s,i){return senro.checkRequire("video",function(){senro.video.objects.push(jwplayer(e).setup({flashplayer:"http://static.woniu.com/script/jwplayer/player.swf",skin:"http://static.woniu.com/script/jwplayer/skin/bekle.zip",file:t,image:n,width:r||442,height:s||331})),senro.video.callbacks.push(i)}),!1},addSwf:function(e,t,n,r,s){return senro.checkRequire("swf",function(){senro.swf.objects.push(addSWF(t,e,n,r)),senro.swf.callbacks.push(s)}),!1},addNavFooter:function(e){var t=e||"",n={type:"text/javascript",src:"http://static.woniu.com/header_tl/pub-header.js",charset:"utf-8",id:"pub-header"},r={type:"text/javascript",src:"http://static.woniu.com/footer_dl/pub-footer.js",charset:"utf-8",id:"pub-footer"};return senro.addScript(n),senro.addScript(r),$("#pub-footer").attr("gamename",t),!1},addShare:function(e,t){var n=$("#"+t)||$("body")[1],r='<div class="jiathis_style"><a class="jiathis_button_qzone"></a><a class="jiathis_button_tsina"></a><a class="jiathis_button_tqq"></a><a class="jiathis_button_renren"></a><a class="jiathis_button_kaixin001"></a><a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a><a class="jiathis_counter_style"></a></div>',s={type:"text/javascript",src:"http://v3.jiathis.com/code/jia.js?uid=1373876204301599",charset:"utf-8"};return e.html(r),senro.addScript(s,n),!1},changeFont:function(e,t,n,r){t.click(function(){return e.css({"font-size":"16px"}),!1}),n.click(function(){return e.css({"font-size":"14px"}),!1}),r.click(function(){return e.css({"font-size":"13px"}),!1})},backTop:function(e){return e.click(function(e){e.preventDefault(),$("html,body").animate({scrollTop:0},300)}),senro.isIE6()||e.fadeOut(0),$(window).scroll(function(){$(document).scrollTop()>0?e.fadeIn(200):e.fadeOut(200)}),!1},addCurrent:function(e,t){var n=window.location.href.split(".html")[0],r=parseInt(n.charAt(n.length-1))-1;return e.removeClass(t),e.eq(r).addClass(t),!1},radio:function(e,t){var n=$("."+e);return n.click(function(){var e=$(this),n=e.siblings();return n.removeClass(t),e.hasClass(t)||(e.addClass(t),e.attr("data-selected","selected")),!1}),n.find("input").length>0&&n.find("input").click(function(){var e=$(this).parent(),n=e.siblings();return n.removeClass(t),e.addClass(t),e.attr("data-selected","selected"),!1}),!1},checkBox:function(e,t,n){var r=$("."+e),s=n||"noLimit";return r.click(function(){var e=$(this),n=e.siblings();return"noLimit"!=s&&n.filter("[data-selected=selected]").length>=s?!1:(e.hasClass(t)?(e.removeClass(t),e.attr("data-selected","undefind")):(e.addClass(t),e.attr("data-selected","selected")),!1)}),r.find("input").length>0&&r.find("input").click(function(){var e=$(this).parent(),n=e.siblings();return"noLimit"!=s&&n.filter("[data-selected=selected]").length>=s?!1:(e.addClass(t),e.attr("data-selected","selected"),!1)}),!1},checkLogin:function(e,t){return $.getJSON("http://gwpassport.woniu.com/v2/islogin?jsoncallback=?",function(n){1020==n.msgcode?e&&e(n):t&&t(n)}),!1},addLoginBtn:function(e){var t="?goto="+document.URL;return e.attr("href","http://www.woniu.com/account/login/"+t),!1},loginOut:function(e){var t="?goto="+document.URL;return e.attr("href","http://gwpassport.woniu.com/v2/logout"+t),!1},getJson:function(e,t,n){var r=t||{"":""},s=e+"?jsoncallback=?&"+jQuery.param(r);return $.getJSON(s,function(e){n&&n(e)}),!1},initLogin:function(e,t,n){return senro.checkRequire("login",function(){{var r=".inputDefault",s=".inputWrite",i=".inputComplete",a=".msgContainer",o=".msgHover",c=".msgError";new Login({formId:e,elements:{scope:t,input:{node:r,write:s,done:i},message:{node:a,hover:o,error:c}},success:function(e){n&&n(e)},handleMessage:function(e){alert(e)}})}}),!1},placeHolderInput:function(e,t){var n=[];return e.each(function(t){n.push(e.eq(t).val())}),e.focusin(function(){var t=e.index(this);return $(this).val()==n[t]&&$(this).val(""),!1}),e.focusout(function(){var t=e.index(this);return""==$(this).val()&&$(this).val(n[t]),!1}),t.click(function(){var t;return e.each(function(r){e.eq(r).val()==n[r]&&(t=!1)}),t}),!1},toggleInput:function(e,t){t.click(function(){var n=t.index(this);return t.eq(n).hide(),e.eq(n).show().focus(),!1}),e.focusout(function(){var n=e.index(this);return e.eq(n).val()||(t.eq(n).show(),e.eq(n).hide()),!1})},cookie:function(e,t,n){function r(e,t){var n=30,r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()}function s(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null}function i(e){var t=new Date;t.setTime(t.getTime()-1);var n=s(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())}var a=t||"",o=n||"";switch(e){case"get":s(a);break;case"set":r(a,o);break;case"del":i(a)}return!1},checkInput:function(e,t,n){function r(){p.each(function(e){for(var t in f)p.eq(e).hasClass(f[t].selecter)&&(f[t].inputs.push(p.eq(e)),f[t].state.push(!1))}),g.each(function(e){for(var t in f)g.eq(e).hasClass(f[t].msgSelecter)&&f[t].msg.push(g.eq(e))});for(var e in f)s(e)}function s(e){for(var n=0;n<f[e].inputs.length;n++)f[e].inputs[n].focusin(e,function(){var t=$("."+f[e].selecter).index(this);return $(this).val(""),f[e].msg[t]&&f[e].msg[t].hide(),!1}),"checkBox"==e&&(f[e].state[n]=f[e].method(f[e].inputs[n].attr("checked"))),f[e].inputs[n].focusout(e,function(){var n=$("."+f[e].selecter).index(this);switch(e){case"password":f[e].state[n]=1==n?f[e].method2(f[e].inputs[0].val(),f[e].inputs[n].val()):f[e].method1(f[e].inputs[n].val());break;case"checkBox":break;default:f[e].state[n]=f[e].method(f[e].inputs[n].val())}f[e].state[n]!==!0&&(f[e].msg[n]?(f[e].msg[n].is("input")?f[e].msg[n].val(f[e].msgLang):f[e].msg[n].html(f[e].msgLang),f[e].msg[n].show(),f[e].msg[n].click(e,function(){return f[e].msg[n].hide(),f[e].inputs[n].focus(),!1})):alert(f[e].msgLang)),m=0;for(var r in f)for(var s=0;s<f[r].state.length;s++)f[r].state[s]===!0?m++:m--;return m==g.length&&t&&t(),!1});return!1}function i(e){var e=$.trim(e);return 0==e.length?!1:!0}function a(e){return"checked"!=e?!1:!0}function o(e){var t=/^[-_A-Za-z0-9]+@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/;return t.test(e)?!0:!1}function c(e){var t=/^[1][0-9][0-9]{9}$/,n=new RegExp(t);return n.test(e)?!0:!1}function l(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return t.test(e)?!0:!1}function u(e){var e=$.trim(e);return e.length<6?(f.password.msgLang="密码不能小于6位",!1):!0}function d(e,t){return e===t&&u(e)&&u(t)?!0:(f.password.msgLang="两次密码不同",!1)}var f=senro.checkInput,p=e.find("input"),h=n||".msg",g=e.find(h),m=0,v=$.Callbacks("once");0==g.length?alert("友情提示！没有找到提示框公用类msg，请给所有的提示框加个msg类，或者通过设置方法的最后一个可选参数自定义类名。"):(f.require={selecter:"require",msgSelecter:"requireMsg",msgLang:"此项为必填！",state:[],inputs:[],msg:[],method:i},f.email={selecter:"email",msgSelecter:"emailMsg",msgLang:"邮箱格式不正确！",state:[],inputs:[],msg:[],method:o},f.cellPhone={selecter:"cellPhone",msgSelecter:"cellPhoneMsg",msgLang:"手机号码格式不正确！",state:[],inputs:[],msg:[],method:c},f.chinaID={selecter:"chinaID",msgSelecter:"chinaIDMsg",msgLang:"身份证号码格式不正确！",state:[],inputs:[],msg:[],method:l},f.checkBox={selecter:"checkBox",msgSelecter:"checkBoxMsg",msgLang:"还有未勾选的选项！",state:[],inputs:[],msg:[],method:a},f.password={selecter:"password",msgSelecter:"passwordMsg",msgLang:"待判断方法修改！",state:[],inputs:[],msg:[],method1:u,method2:d},e[0].reset(),v.add(r),p.focusin(function(){return"text"==$(this).get(0).type&&$(this).val()==$(this).get(0).defaultValue&&$(this).val(""),v.fire(),!1}))},checkHtml5:function(e,t,n){function r(e){Modernizr[e]?t&&t():n&&n()}senro.checkRequire("testHtml5",function(){r(e)})},fixedDomPos:function(e){function t(){var e,t=$(window).height(),n=$("body").height();return e=n-t}if(senro.isIE6()){e.css({position:"absolute"});var n=e.position().top,r=t();$(window).scroll(function(){var t=$(window).scrollTop();r>t&&e.css({top:t+n})}).resize(function(){t();e.css({top:n}),$(this).scroll()}).scroll()}return!1},fixIE6Png:function(e){return senro.isIE6()&&senro.checkRequire("iePng",function(){DD_belatedPNG.fix("."+e)}),!1},load:function(e,t,n,r){senro.checkRequire("preload",function(){function s(e){if("js"==e.item.ext){var n={type:"text/javascript",src:e.item.src};senro.addScript(n)}t&&t(e)}function i(e){n&&n(100*e.loaded.toFixed(1))}function a(){r&&r(c)}var o=[];o=o.concat(e);var c=new createjs.LoadQueue;c.addEventListener("progress",i),c.addEventListener("complete",a),c.addEventListener("fileload",s),c.loadManifest(o)})},tweenColor:function(e,t,n){var r=n||2e3;return senro.checkRequire("animateColors",function(){e.animate(t,r)}),!1},addGradient:function(e,t){var n=e[0];return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setGradient(n,"-sand-gradient("+t+");")}),!1},css3Rotate:function(e,t){var n=e[0],r=t||0;return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setTransform(n,"rotate("+r+"deg)")}),!1},css3Translate:function(e,t,n){var r=e[0],s=t||0,i=n||0;return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setTransform(r,"translate("+s+"px,"+i+"px)")}),!1},css3Scale:function(e,t,n){var r=e[0],s=t||0,i=n||0;return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setTransform(r,"scale("+s+", "+i+")")}),!1},css3Skew:function(e,t,n){var r=e[0],s=t||0,i=n||0;return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setTransform(r,"skew("+s+"deg, "+i+"deg)")}),!1},css3SetOpacity:function(e,t){var n=e[0],r=t||1;return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setOpacity(n,r)}),!1},css3SetTransform:function(e,t){var n=e[0];return senro.checkRequire("cssSandpaper",function(){cssSandpaper.setTransform(n,t)}),!1},directionAnimate:function(e,t){e.bind("mouseenter mouseleave",function(e){var n=$(this).width(),r=$(this).height(),s=(e.pageX-this.offsetLeft-n/2)*(n>r?r/n:1),i=(e.pageY-this.offsetTop-r/2)*(r>n?n/r:1),a=Math.round((Math.atan2(i,s)*(180/Math.PI)+180)/90+3)%4,o={},c={};switch(a){case 0:o={top:-r,left:0},c={top:0,left:0};break;case 1:o={top:0,left:n},c={top:0,left:0};break;case 2:o={top:r,left:0},c={top:0,left:0};break;case 3:o={top:0,left:-n},c={top:0,left:0}}var l=[o,c];"mouseleave"==e.type&&(l=[c,o]),$(t,this).stop().css(l[0]).animate(l[1],200)})},tween:function(e,t,n,r,s,i,a,o,c,l){return senro.checkRequire("tweenMax",function(){n.ease=s||Cubic.easeIn,n.delay=r||0,n.onUpdate=i||null,n.onUpdateParams=a||[],n.onComplete=o||null,n.onCompleteParams=c||[],senro.tweenMax.objects.push(TweenLite.to(e,t,n)),senro.tweenMax.callbacks.push(l)}),!1}};